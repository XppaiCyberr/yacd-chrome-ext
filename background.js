chrome.runtime.onInstalled.addListener(e=>{console.log("Yacd Meta Extension installed:",e.reason),"install"===e.reason&&chrome.storage.sync.set({theme:"auto",defaultBackend:"http://127.0.0.1:9090"})}),chrome.runtime.onStartup.addListener(()=>{console.log("Yacd Meta Extension started")}),chrome.runtime.onMessage.addListener((e,t,n)=>{switch(console.log("Background received message:",e),e.type){case"GET_STORAGE":return chrome.storage.sync.get(e.keys,e=>{n(e)}),!0;case"SET_STORAGE":return chrome.storage.sync.set(e.data,()=>{n({success:!0})}),!0;case"OPEN_OPTIONS":chrome.runtime.openOptionsPage();break;default:console.log("Unknown message type:",e.type)}}),chrome.storage.onChanged.addListener((e,t)=>{console.log("Storage changed:",e,t),chrome.runtime.sendMessage({type:"STORAGE_CHANGED",changes:e,namespace:t}).catch(()=>{})});setInterval(()=>{chrome.runtime.getPlatformInfo(()=>{})},25e3);
